var Index=function(){const csrf_token=$('meta[name="csrf-token"]').attr("content");var table,aSelected=[],handleData=function(){table=$("#table-my-request").DataTable({responsive:!0,autoWidth:!0,pageLength:15,searching:!0,paging:!0,lengthMenu:[[15,25,50],[15,25,50]],language:{info:"Show _START_ - _END_ from _TOTAL_ data",infoEmpty:"Show 0 - 0 from 0 data",infoFiltered:"",zeroRecords:"Data not found",loadingRecords:"Loading...",processing:"Processing..."},columnsDefs:[{searchable:!1,target:[0,1]},{orderable:!1,target:0}],processing:!0,serverSide:!0,ajax:{url:url+"app/flexy-allowance/allowance-my-request.php",type:"POST",data:{_token:csrf_token}},columns:[{data:"cbox",orderable:!1},{data:"rnum",orderable:!1},{data:"nomer",orderable:!1},{data:"name",orderable:!1},{data:"company",orderable:!1},{data:"tr_date",orderable:!1},{data:"period",orderable:!1},{data:"total",orderable:!1},{data:"hr",orderable:!1},{data:"manager",orderable:!1},{data:"action",orderable:!1}],drawCallback:function(settings){$(".data-menu-cbox").on("click",(function(){handleAddDeleteAselected($(this).val(),$(this).parents()[1])})),$("#btn-delete").attr("disabled",""),aSelected.splice(0,aSelected.length)}}),$("#table-my-request tbody").on("click","tr",(function(){handleInfo(table.row(this).data())}))},handleInfo=function(param){$(document).on("click",".hr-status-info",(function(){if($("#modal-title").html("Hr Note"),null===param.hr_note)var hrNote="Data not found";else var hrNote=param.hr_note;$("#note-message").html("HR Note: "+hrNote)})),$(document).on("click",".manager-status-info",(function(){if($("#modal-title").html("HR Director Note"),null===param.manager_note)var managerNote="Data not found";else var managerNote=param.manager_note;$("#note-message").html("HR Director Note: "+managerNote)}))},handleAddDeleteAselected=function(value,parentElement){var check_value=$.inArray(value,aSelected);-1!==check_value?($(parentElement).removeClass("table-info"),aSelected.splice(check_value,1)):($(parentElement).addClass("table-info"),aSelected.push(value)),handleBtnDisableEnable()},handleBtnDisableEnable=function(){aSelected.length>0?$("#btn-delete").removeAttr("disabled"):$("#btn-delete").attr("disabled","")},handleDelete=function(){$("#btn-delete").click((function(e){e.preventDefault(),Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(result=>{result.isConfirmed&&$.ajax({type:"POST",url:url+"app/flexy-allowance/allowance-request-route.php",data:{action:"delete",_token:csrf_token,ids:aSelected},success:function(response){1==response.success&&(Swal.fire("Deleted!","Your file has been deleted.","success"),table.ajax.reload())},error:function(response){Swal.fire({icon:"error",title:"Oops...",text:"Internal Server Error"})}})})}))};return{init:function(){handleData(),handleDelete()}}}();$(document).ready((function(){Index.init()}));