var Index=function(){const csrf_token=$('meta[name="csrf-token"]').attr("content");var handleDataStatus=function(){$("#StatusEmp").select2({allowClear:!0,placeholder:"pilih item status",dataType:"json",ajax:{method:"POST",url:url+"app/ajax/data-status-dropdown.php",data:function(params){return{search:params.term,page:params.page||1}},processResults:function(data,params){return params.page=params.page||1,{results:data.items,pagination:{more:!1}}}},templateResult:format,templateSelection:formatSelection})},handleDataCompany=function(){$("#Company").select2({allowClear:!0,placeholder:"pilih item company",dataType:"json",ajax:{method:"POST",url:url+"app/ajax/data-company-dropdown.php",data:function(params){return{search:params.term,page:params.page||1}},processResults:function(data,params){return params.page=params.page||1,{results:data.items,pagination:{more:!1}}}},templateResult:format,templateSelection:formatSelection})},handleDataDepartemen=function(){$("#Dept").select2({allowClear:!0,placeholder:"pilih item departemen",dataType:"json",ajax:{method:"POST",url:url+"app/ajax/data-departemen-dropdown.php",data:function(params){return{search:params.term,page:params.page||1}},processResults:function(data,params){return params.page=params.page||1,{results:data.items,pagination:{more:!1}}}},templateResult:format,templateSelection:formatSelection})};function format(repo){if(repo.loading)return repo.text;var $container=$("<div class='select2-result-repository clearfix'><div class='select2-result-repository__title'></div></div>");return $container.find(".select2-result-repository__title").text(repo.text),$container}function formatSelection(repo){return repo.text}var handleStatusEmp=function(){$("#StatusEmp").change((function(e){e.preventDefault();const nilai=$(this).val();1==nilai?($("#tgl_kartap").removeAttr("disabled"),$("#tgl_kartap").val("")):$("#tgl_kartap").attr("disabled","disabled")}))},handleFormSubmit=function(){$("#btnBack").click((function(e){e.preventDefault(),window.location.href=url+"view/pages/employee/index.php"})),handleStatusEmp(),$("#formEmployee").submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);$.ajax({type:"POST",url:url+"app/ajax/employee-emp.php",data:formData,processData:!1,contentType:!1,success:function(response){const message=response.data.message,dataId=response.data.data.id,dataStatus=response.data.data.status;let obj;!0===response.success?(toastr.success(message),setTimeout(()=>{document.location.href=url+"view/pages/employee/employee-personal.php?dataId="+dataId+"&dataStatus="+dataStatus},4500)):$.each(response.data,(function(key,value){toastr.error(value)}))}})}))};return{init:function(){handleDataStatus(),handleDataCompany(),handleDataDepartemen(),handleFormSubmit()}}}();$(document).ready((function(){Index.init()}));