var Index=function(){const csrf_token=$('meta[name="csrf-token"]').attr("content"),idFrom=$("#emp_id").val();var handleDataPengalaman=function(){table=$("#tablePengalamanKerja").DataTable({responsive:!0,autoWidth:!0,pageLength:10,searching:!0,paging:!0,lengthMenu:[[10,25,50],[10,25,50]],language:{info:"Menampilkan _START_ - _END_ dari _TOTAL_ data",infoEmpty:"Menampilkan 0 - 0 dari 0 data",infoFiltered:"",zeroRecords:"Data tidak di temukan",loadingRecords:"Loading...",processing:"Processing..."},columnsDefs:[{searchable:!1,target:[0,1]},{orderable:!1,target:0}],processing:!0,serverSide:!0,ajax:{url:url+"app/ajax/emp-pengalaman-kerja.php",type:"POST",data:{_token:csrf_token,empId:idFrom}},columns:[{data:"action",orderable:!1},{data:"perusahaan",orderable:!1},{data:"jabatan",orderable:!1},{data:"periode_masuk",orderable:!1},{data:"periode_keluar",orderable:!1},{data:"keterangan",orderable:!1}]}),$("#tablePengalamanKerja tbody").on("click","tr",(function(){handleShowInModal(table.row(this).data())}))},handleShowInModal=function(param){$("#idData").val(param.data_index),$("#perusahaan2").val(param.perusahaan),$("#jabatan2").val(param.jabatan),$("#periode_masuk2").val(param.periode_masuk),$("#periode_keluar2").val(param.periode_keluar),$("#keterangan2").val(param.keterangan)},handlePengalamanKerja=function(){$("#formEmployeeAddPengalaman").submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);confirm("Apakah Data Sudah Sesuai?!")&&$.ajax({type:"POST",url:url+"app/ajax/employee-pengalaman-kerja.php",data:formData,processData:!1,contentType:!1,success:function(response){let obj;!0===response.success?(toastr.success(response.data),setTimeout(()=>{location.reload()},4500)):$.each(response.data,(function(key,value){toastr.error(value)}))}})}))},handleUpdatePengalamanKerja=function(){$("#formEmployeeUpdatePengalaman").submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);confirm("Apakah Data Sudah Sesuai?!")&&$.ajax({type:"POST",url:url+"app/ajax/update-employee-pengalaman-kerja.php",data:formData,processData:!1,contentType:!1,success:function(response){let obj;!0===response.success?(toastr.success(response.data),setTimeout(()=>{location.reload()},4500)):$.each(response.data,(function(key,value){toastr.error(value)}))}})}))},handleDelete=function(){$(document).on("click",".btnDelete",(function(){let id=$(this).data("button");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(result=>{result.isConfirmed&&$.ajax({type:"POST",url:url+"/app/ajax/delete-pengalaman-kerja.php",data:{_token:csrf_token,ids:id},success:function(response){!0===response.success?(Swal.fire("Deleted!","Your file has been deleted.","success"),table.ajax.reload()):Swal.fire({icon:"error",title:"Oops...",text:"Internal Server Error"})}})})}))},getDataEmployee=function(){var results;$.ajax({type:"POST",url:url+"app/ajax/emp-employee.php",async:!1,data:{index:idFrom,_token:csrf_token},success:function(response){$("#karyawanName").html(response.nama)}})};return{init:function(){handleDataPengalaman(),getDataEmployee(),handlePengalamanKerja(),handleDelete(),handleUpdatePengalamanKerja()}}}();$(document).ready((function(){Index.init()}));