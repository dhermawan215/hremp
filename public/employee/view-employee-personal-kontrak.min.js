var Index=function(){const csrf_token=$('meta[name="csrf-token"]').attr("content"),idFrom=$("#emp_id").val();var handleDataKontrak=function(){table=$("#tebleDataKontrak").DataTable({responsive:!0,autoWidth:!0,pageLength:10,searching:!0,paging:!0,lengthMenu:[[10,25,50],[10,25,50]],language:{info:"Menampilkan _START_ - _END_ dari _TOTAL_ data",infoEmpty:"Menampilkan 0 - 0 dari 0 data",infoFiltered:"",zeroRecords:"Data tidak di temukan",loadingRecords:"Loading...",processing:"Processing..."},columnsDefs:[{searchable:!1,target:[0,1]},{orderable:!1,target:0}],processing:!0,serverSide:!0,ajax:{url:url+"app/ajax/emp-personal-kontrak.php",type:"POST",data:{_token:csrf_token,empId:idFrom}},columns:[{data:"rnum",orderable:!1},{data:"awal_kontrak",orderable:!1},{data:"akhir_kontrak",orderable:!1},{data:"keterangan",orderable:!1},{data:"action",orderable:!1}]}),$("#tebleDataKontrak tbody").on("click","tr",(function(){handleShowInModal(table.row(this).data())}))},handleShowInModal=function(param){$("#idData").val(param.data_index),$("#awal_kontrak").val(param.awal_kontrak),$("#akhir_kontrak").val(param.akhir_kontrak),$("#keterangan").val(param.keterangan)},getDataEmployee=function(){var results;$.ajax({type:"POST",url:url+"app/ajax/emp-personal-kontrak2.php",async:!1,data:{id:idFrom,_token:csrf_token},success:function(response){$("#karyawanName").html(response.nama),$("#statusContent").append(response.content),$("#btnAddKontrak").prop("disabled",response.disabled_btn)}})},handleIsEdit=function(){$("#editControl").on("click",(function(){$("#editControl").is(":checked")?($("#awal_kontrak").removeAttr("disabled","disabled"),$("#akhir_kontrak").removeAttr("disabled","disabled"),$("#keterangan").removeAttr("disabled","disabled"),$("#btnUpdate").removeAttr("disabled","disabled")):($("#awal_kontrak").attr("disabled","disabled"),$("#akhir_kontrak").attr("disabled","disabled"),$("#keterangan").attr("disabled","disabled"),$("#btnUpdate").attr("disabled","disabled"))}))},handleFormSubmit=function(){$("#formEmployeeKontrak").submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);confirm("Apakah Data Sudah Sesuai?!")&&$.ajax({type:"POST",url:url+"app/ajax/update-employee-kontrak.php",data:formData,processData:!1,contentType:!1,success:function(response){let obj;!0===response.success?(toastr.success(response.data),setTimeout(()=>{location.reload()},4500)):$.each(response.data,(function(key,value){toastr.error(value)}))}})}))},handleFormAddKontrak=function(){$("#formEmployeeAddKontrak").submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);confirm("Apakah Data Sudah Sesuai?!")&&$.ajax({type:"POST",url:url+"app/ajax/employee-kontrak.php",data:formData,processData:!1,contentType:!1,success:function(response){let obj;!0===response.success?(toastr.success(response.data),setTimeout(()=>{location.reload()},4500)):$.each(response.data,(function(key,value){toastr.error(value)}))}})}))};return{init:function(){getDataEmployee(),handleDataKontrak(),handleFormSubmit(),handleFormAddKontrak()}}}();$(document).ready((function(){Index.init()}));